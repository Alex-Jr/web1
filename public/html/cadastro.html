<html>
    <head>
        <meta charset="utf-8">
        <title>Cadastro</title>
        <!-- <link rel="stylesheet" href="cadastro.css"> -->
        <!-- <script type="text/javascript" src="cadastro.js"></script> -->
        <script type="text/javascript" src="notLoggedPage.js"></script>
        <script type="text/javascript" src="formulario.js"></script>

        <script>
            function cadastrar() {
                const xhttp = new XMLHttpRequest();
    
                xhttp.onreadystatechange = function() {
                    if(this.readyState == 4) {
                        switch(this.status) {
                            case 200:
                                window.location.assign("/login.html");
                                break
                            default: 
                                document.getElementById('errogeral').innerHTML = this.responseText;
                                break
                        }
                    }
                };
    
                xhttp.open("POST", `cadastro.html`, true);

                let bodyRequest = ''

                const form = document.forms['formulario'];

                for (input of form) {
                    if(!input.name) continue;
                    bodyRequest += `${input.name}=${input.value}&`;
                }
                
                xhttp.send(bodyRequest);
            }
        </script>
    </head>
    <body>

        <h1>Cadastre-se</h1>
        <form id="formulario" name="formulario">
                <div class='campo' id="erronome">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome">
                </div>

                <div class="campo" id="erroemail">
                    <label for="email">E-mail:</label>
                    <input type="text" id="email" name="email"><br>
                </div>

                <div class="campo" id="errodata">
                    <label for="datanasc">Nascimento:</label>
                    <input type="date" id="datanasc" name="datanasc">
                </div>

                <div class="campo" id="errocpf">
                    <label for="cpf">CPF:</label>
                    <input type="text" id="cpf" name="cpf"><br>
                </div>

                <div class="campo" id="errosenha">
                    <label for="senha">Senha:</label>
                    <input type="password" id="senha" name="senha">
                </div>
                
                <div class="campo" id="errosenhaconf">
                    <label for="confsenha">Confirmar Senha:</label>
                    <input type="password" id="confsenha" name="confsenha"><br>
                </div>
                
                <div class="campo" id="errotel">
                    <label for="telefone">Telefone:</label>
                    <input type="tel" id="telefone" name="telefone">
                </div>

                <div class="botoes">
                    <!-- <input type="button" name="reset" value="Reset" class="botao" onclick="resetar()"> -->

                    <button type="button" class="botao" onclick="cadastrar()"> Enviar </button>
                    <div id="errogeral"></div>
                </div>
                

        </form>
    </body>
    
</html>